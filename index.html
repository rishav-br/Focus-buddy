<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Focus Buddy - AI Productivity Partner</title>
<style>
  /* Import Google Font for a friendly cartoon style */
  @import url('https://fonts.googleapis.com/css2?family=Fredoka+One&family=Open+Sans:wght@400;700&display=swap');

  /* Reset & basics */
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0; padding: 0;
    font-family: 'Open Sans', sans-serif;
    background: linear-gradient(135deg, #89f7fe 0%, #66a6ff 100%);
    color: var(--text);
    transition: background 0.3s, color 0.3s;
  }
  #app {
    max-width: 960px;
    margin: 40px auto 80px;
    padding: 28px 36px;
    background: #f0f4ffcc;
    border-radius: 32px;
    box-shadow:
      0 8px 32px rgba(102, 152, 255, 0.35),
      inset 0 0 40px #a6c6ff66;
    backdrop-filter: blur(12px);
  }
  h1 {
    font-family: 'Fredoka One', cursive;
    font-weight: 900;
    font-size: 4rem;
    margin-bottom: 24px;
    text-align: center;
    color: #1a3c83;
    text-shadow:
      2px 2px 0 #dbe7ff,
      4px 4px 15px rgba(49, 84, 176, 0.6);
  }
  nav {
    position: fixed;
    bottom: 0; left: 0; right: 0;
    background: #507ddecc;
    border-top: 1px solid #3f68c799;
    display: flex;
    justify-content: space-around;
    padding: 14px 0;
    box-shadow: 0 -6px 22px #3a5fcacc;
    z-index: 100;
    backdrop-filter: blur(16px);
    border-radius: 24px 24px 0 0;
  }
  nav button {
    background: none;
    border: none;
    color: #c2ddffcc;
    font-weight: 700;
    font-size: 15px;
    cursor: pointer;
    padding: 8px 12px;
    transition: color 0.4s, transform 0.3s;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 6px;
  }
  nav button:hover {
    color: #f0f9ff;
    transform: scale(1.1);
  }
  nav button.active {
    color: #f9fbfe;
    text-shadow:
      0 0 10px #739fff,
      0 0 20px #5378ff;
    transform: scale(1.2);
  }

  /* Cards */
  section {
    background: #ffffffdd;
    border-radius: 36px;
    box-shadow:
      0 0 40px 8px #bad6ffff,
      inset 0 0 36px 3px #a5c6fecc;
    margin-bottom: 32px;
    padding: 36px 48px;
    backdrop-filter: blur(18px);
    border: 1px solid #b0d0ffff;
    transition: box-shadow 0.5s ease;
  }
  section:hover {
    box-shadow:
      0 0 50px 14px #97c1ffff,
      inset 0 0 48px 6px #9cc0ffcc;
  }

  /* Timer styles */
  #timer-section {
    text-align: center;
  }
  #timer-label {
    font-weight: 800;
    font-size: 30px;
    margin-bottom: 20px;
    color: #3e5bbf;
    letter-spacing: 0.14em;
    text-shadow: 0 0 18px #a5b8ff99;
  }
  #timer-display {
    font-size: 90px;
    font-weight: 900;
    letter-spacing: 12px;
    margin-bottom: 28px;
    color: #244a99;
    text-shadow:
      0 0 16px #7e9fffbb,
      0 0 30px #4f71ffcc,
      0 0 38px #4058dbcc;
    font-family: 'Fredoka One', cursive;
  }
  #timer-controls button {
    background: linear-gradient(135deg, #638bff, #3c5fdb);
    color: white;
    border: none;
    font-size: 22px;
    font-weight: 900;
    padding: 16px 60px;
    margin: 0 18px;
    border-radius: 40px;
    cursor: pointer;
    box-shadow:
      0 10px 18px rgba(46, 71, 255, 0.7);
    transition: background 0.4s ease, box-shadow 0.4s ease;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    user-select: none;
  }
  #timer-controls button:hover {
    background: linear-gradient(45deg, #92b1ff, #577fed);
    box-shadow:
      0 14px 26px #4c77ffcc;
  }
  #timer-settings {
    margin-top: 32px;
    display: flex;
    justify-content: center;
    gap: 28px;
    flex-wrap: wrap;
  }
  #timer-settings label {
    display: flex;
    flex-direction: column;
    font-weight: 700;
    font-size: 17px;
    color: #5871bfdd;
  }
  #timer-settings input {
    margin-top: 12px;
    border-radius: 14px;
    border: 1.5px solid #aac1ffcc;
    background: #e8edff;
    padding: 12px 18px;
    width: 92px;
    font-size: 24px;
    font-weight: 900;
    color: #3d4a99e0;
    font-family: 'Fredoka One', cursive;
    text-align: center;
    box-shadow: inset 0 0 20px #94a9ffcc;
    transition: background 0.3s, border-color 0.3s;
    user-select: text;
  }
  #timer-settings input:focus {
    outline: none;
    background: #c2d1ffcc;
    border-color: #6181ffdd;
    box-shadow: inset 0 0 28px #648dffdb;
  }

  /* Tasks styles */
  #tasks-section h2 {
    font-size: 28px;
    font-weight: 900;
    margin-bottom: 22px;
    color: #3a4c91;
    text-shadow: 0 0 6px #7c8eff80;
  }
  #new-task-row {
    display: flex;
    justify-content: space-between;
    gap: 18px;
  }
  #new-task-row input, #new-task-row select {
    flex: 1;
    font-size: 20px;
    padding: 14px 20px;
    border-radius: 18px;
    border: 1.7px solid #a9bfffcc;
    background: #e3eaff;
    color: #404f9b;
    font-weight: 700;
    font-family: 'Fredoka One', cursive;
    box-shadow: inset 0 0 18px #8d9fffbb;
    transition: background 0.3s, border-color 0.3s;
  }
  #new-task-row input::placeholder {
    color: #9ca8f7cc;
    font-weight: 600;
  }
  #new-task-row input:focus, #new-task-row select:focus {
    outline: none;
    background: #b3c1ffcc;
    border-color: #5e7beddd;
    box-shadow: inset 0 0 22px #5c7ef9ec;
  }
  #new-task-row select {
    max-width: 150px;
  }
  #new-task-row button {
    padding: 0 28px;
    border: none;
    background: #5a79ff;
    color: #f0f2ff;
    font-weight: 900;
    font-size: 22px;
    border-radius: 22px;
    cursor: pointer;
    box-shadow:
      0 9px 25px rgba(82, 91, 220, 0.85);
    transition: background 0.4s ease, box-shadow 0.4s ease;
  }
  #new-task-row button:hover {
    background: #8ca1ff;
    box-shadow:
      0 11px 32px #7e92ffcc;
  }
  .task-item {
    display: flex;
    align-items: center;
    padding: 16px 14px;
    border-bottom: 2px solid #a9b8ffcc;
    font-size: 19px;
    color: #465a9fdd;
    font-weight: 700;
    transition: background 0.3s;
  }
  .task-item:hover {
    background: #d2dbffcc;
  }
  .task-checkbox {
    margin-right: 22px;
    cursor: pointer;
    font-size: 30px;
    user-select: none;
    color: #6f7ef7cc;
    transition: color 0.3s;
  }
  .task-checkbox.checked {
    color: #4b57f7;
  }
  .task-text {
    flex: 1;
  }
  .task-text.done {
    text-decoration: line-through;
    color: #8b93bcaa;
    opacity: 0.65;
  }
  .task-priority {
    font-size: 15px;
    font-weight: 900;
    border-radius: 26px;
    padding: 8px 18px;
    user-select: none;
    margin-right: 22px;
    box-shadow: 0 0 12px #a2abffbb;
  }
  .priority-High {
    color: #ff6f94;
    background: #ff90a6c4;
  }
  .priority-Normal {
    color: #5572ff;
    background: #9aaffcdc;
  }
  .priority-Low {
    color: #45d4b3;
    background: #59ceaeb6;
  }
  .task-delete {
    cursor: pointer;
    color: #ee6f7acc;
    font-size: 28px;
    user-select: none;
    transition: color 0.3s;
  }
  .task-delete:hover {
    color: #f34157;
  }

  /* Mood Journal styles */
  #journal-entry {
    width: 100%;
    min-height: 130px;
    border-radius: 24px;
    border: 2px solid #94a3fbcc;
    background: #dce1fdcc;
    padding: 20px 26px;
    resize: vertical;
    font-size: 19px;
    color: #3a4f9b;
    font-family: 'Fredoka One', cursive;
    box-shadow: inset 0 0 26px #8f9fffcf;
    transition: background 0.3s, border-color 0.3s;
  }
  #journal-entry::placeholder {
    color: #abb5fdbb;
  }
  #journal-entry:focus {
    outline: none;
    background: #bbc5ffcc;
    border-color: #638affee;
    box-shadow: inset 0 0 36px #7f88ffcc;
  }
  #mood-select, #energy-select {
    font-size: 22px;
    font-weight: 700;
    border-radius: 22px;
    border: 2px solid #a5b6ffcc;
    background: #c7d0ffcc;
    color: #38466d;
    margin-top: 16px;
    width: 130px;
    padding: 12px 16px;
    box-shadow: inset 0 0 22px #9ba9ffbb;
    transition: background 0.3s, border-color 0.3s;
  }
  #mood-select:focus, #energy-select:focus {
    outline: none;
    background: #aab9ffcc;
    border-color: #546da9ff;
    box-shadow: inset 0 0 38px #5866d7cc;
  }
  label.mood-label {
    font-weight: 900;
    font-size: 17px;
    color: #4f6198;
  }
  .journal-group {
    margin-bottom: 36px;
  }

  /* Motivational Quote */
  #motivation {
    margin-top: 16px;
    font-size: 22px;
    font-style: italic;
    color: #5578afcc;
    text-align: center;
    max-width: 580px;
    margin-left: auto;
    margin-right: auto;
    font-family: 'Fredoka One', cursive;
    text-shadow: 0 0 10px #6a84cfff;
    user-select: none;
  }
  #hear-quote {
    margin-top: 12px;
    background: linear-gradient(135deg, #8e5bff, #5674ff);
    color: #f1f3ff;
    border: none;
    cursor: pointer;
    padding: 12px 38px;
    font-size: 20px;
    border-radius: 36px;
    box-shadow: 0 8px 26px #637dff9f;
    display: block;
    margin-left: auto;
    margin-right: auto;
    transition: background 0.4s;
    font-family: 'Fredoka One', cursive;
    user-select: none;
  }
  #hear-quote:hover {
    background: linear-gradient(90deg, #ba97ff, #8292ff);
  }

  /* Analytics */
  #analytics-bars {
    display: flex;
    justify-content: space-between;
    max-width: 580px;
    height: 160px;
    margin: 22px auto 36px;
    user-select: none;
  }
  .analytics-bar {
    flex: 1;
    margin: 0 10px;
    display: flex;
    flex-direction: column;
    justify-content: flex-end;
    align-items: center;
  }
  .analytics-bar-fill {
    background: linear-gradient(135deg, #6a7fdaff, #33459dff);
    width: 24px;
    border-radius: 16px 16px 0 0;
    transition: height 0.7s cubic-bezier(0.22,1,0.36,1);
  }
  .analytics-bar-label {
    margin-top: 7px;
    color: #6481becc;
    font-size: 15px;
  }

  /* Theme Toggle */
  #theme-toggle {
    position: fixed;
    top: 18px;
    right: 18px;
    background: #fff3f0cc;
    border-radius: 20px;
    padding: 8px 24px;
    display: flex;
    align-items: center;
    cursor: pointer;
    user-select: none;
    box-shadow:
      0 4px 15px #c67a8cff;
    transition: background 0.3s, color 0.3s;
    font-family: 'Fredoka One', cursive;
    font-weight: 700;
    font-size: 16px;
    color: #c84760;
  }
  #theme-toggle:hover {
    background: #ff647dcc;
    color: #fffaf8;
  }

  /* Utility */
  .hidden {
    display: none !important;
  }
  /* Responsive */
  @media (max-width: 600px) {
    #timer-display {
      font-size: 60px;
      letter-spacing: 6px;
    }
    nav button {
      font-size: 14px;
      padding: 8px 12px;
    }
    #analytics-bars {
      max-width: 100%;
      margin: 18px 0 28px;
    }
  }
</style>
</head>
<body>
<div id="app" data-theme="light">
  <h1>Focus Buddy</h1>

  <!-- Pomodoro Timer Section -->
  <section id="timer-section">
    <div id="timer-label">Focus Session</div>
    <div id="timer-display">25:00</div>
    <div id="timer-controls">
      <button id="start-pause-btn" aria-label="Start or pause timer">Start</button>
      <button id="reset-btn" aria-label="Reset timer">Reset</button>
    </div>
    <div id="timer-settings" aria-label="Pomodoro timer settings">
      <label for="focus-minutes">Focus (min)
        <input type="number" id="focus-minutes" min="1" max="180" value="25" />
      </label>
      <label for="short-break">Short Break (min)
        <input type="number" id="short-break" min="1" max="60" value="5" />
      </label>
      <label for="long-break">Long Break (min)
        <input type="number" id="long-break" min="1" max="60" value="15" />
      </label>
    </div>
  </section>

  <!-- Task Manager Section -->
  <section id="tasks-section">
    <h2>Task Manager</h2>
    <div id="new-task-row">
      <input type="text" id="new-task-input" placeholder="Add new task..." aria-label="New task text input" />
      <select id="task-priority" aria-label="Task priority selector">
        <option value="High">High Priority</option>
        <option value="Normal" selected>Normal Priority</option>
        <option value="Low">Low Priority</option>
      </select>
      <button id="add-task-btn" aria-label="Add new task">Add</button>
    </div>
    <div id="tasks-list" aria-live="polite" aria-relevant="additions removals"></div>
  </section>

  <!-- Mood & Productivity Journal Section -->
  <section id="journal-section">
    <h2>Mood & Productivity Journal</h2>
    <div class="journal-group">
      <label class="mood-label" for="mood-select">Mood (1=Low, 5=High)</label>
      <select id="mood-select" aria-label="Select your current mood level" aria-live="polite" aria-atomic="true" aria-relevant="text">
        <option value="1">1 - Low</option>
        <option value="2">2</option>
        <option value="3" selected>3 - Average</option>
        <option value="4">4</option>
        <option value="5">5 - High</option>
      </select>
    </div>
    <div class="journal-group">
      <label class="mood-label" for="energy-select">Energy Level (1=Low, 5=High)</label>
      <select id="energy-select" aria-label="Select your current energy level">
        <option value="1">1 - Low</option>
        <option value="2">2</option>
        <option value="3" selected>3 - Average</option>
        <option value="4">4</option>
        <option value="5">5 - High</option>
      </select>
    </div>
    <div class="journal-group">
      <label for="journal-entry">Today's Journal Entry</label>
      <textarea id="journal-entry" rows="5" placeholder="Write about your day, focus, or anything else..." aria-label="Journal text input"></textarea>
    </div>
  </section>

  <!-- Motivational Quote Section -->
  <section id="motivation-section" aria-live="polite" aria-atomic="true">
    <div id="motivation">"Stay positive, work hard, make it happen!"</div>
    <button id="hear-quote" aria-label="Hear motivational quote">ðŸ”Š Hear Quote</button>
  </section>

  <!-- Analytics Section -->
  <section id="analytics-section">
    <h2>Focus Analytics (Past 7 Days)</h2>
    <div id="analytics-bars" aria-label="Focus minutes bar chart for past 7 days">
      <!-- Bars generated by JS -->
    </div>
    <p style="text-align:center; font-weight:bold; margin-top:16px;">
      Current Streak: <span id="streak-count">4</span> days &nbsp;|&nbsp;
      Productivity Score: <span id="productivity-score">85</span>%
    </p>
  </section>

  <!-- Footer Navigation -->
  <nav role="navigation" aria-label="Main menu">
    <button data-tab="timer" class="active" aria-current="page" aria-label="Timer tab">Timer</button>
    <button data-tab="tasks" aria-label="Tasks tab">Tasks</button>
    <button data-tab="journal" aria-label="Journal tab">Journal</button>
    <button data-tab="analytics" aria-label="Analytics tab">Analytics</button>
  </nav>

  <!-- Theme Toggle -->
  <div id="theme-toggle" role="button" tabindex="0" aria-label="Toggle light/dark theme" title="Toggle light/dark theme">
    ðŸŒ™ <span>Dark Mode</span>
  </div>
</div>

<script>
  (()=>{
    const app=document.getElementById('app');
    const tabs=['timer','tasks','journal','analytics'];
    let currentTab='timer';

    // Timer Elements
    const timerLabel=document.getElementById('timer-label');
    const timerDisplay=document.getElementById('timer-display');
    const startPauseBtn=document.getElementById('start-pause-btn');
    const resetBtn=document.getElementById('reset-btn');
    const focusInput=document.getElementById('focus-minutes');
    const shortBreakInput=document.getElementById('short-break');
    const longBreakInput=document.getElementById('long-break');

    // Task Elements
    const tasksList=document.getElementById('tasks-list');
    const newTaskInput=document.getElementById('new-task-input');
    const taskPrioritySelect=document.getElementById('task-priority');
    const addTaskBtn=document.getElementById('add-task-btn');

    // Journal Elements
    const moodSelect=document.getElementById('mood-select');
    const energySelect=document.getElementById('energy-select');
    const journalEntry=document.getElementById('journal-entry');

    // Motivation Elements
    const motivationDiv=document.getElementById('motivation');
    const hearQuoteBtn=document.getElementById('hear-quote');
    const quotes=[
      "Stay positive, work hard, make it happen!",
      "Focus on being productive instead of busy.",
      "Every minute counts. Keep pushing!",
      "Youâ€™re capable of amazing things!",
      "Small steps lead to big results."
    ];
    let quoteIndex=0;

    // Analytics Elements
    const analyticsBars=document.getElementById('analytics-bars');
    const streakCountSpan=document.getElementById('streak-count');
    const productivityScoreSpan=document.getElementById('productivity-score');
    const weeklyFocusMinutes=[120,150,100,180,200,90,130];
    const streakCount=4;
    const productivityScore=85;

    // Timer state
    let phase='focus';
    let timerSeconds=parseInt(focusInput.value)*60;
    let timerRunning=false;
    let timerInterval=null;
    let completedCycles=0;

    // Show/hide tabs
    function showTab(tab){
      tabs.forEach(t=>{
        const section=document.getElementById(t+'-section');
        if(section) section.style.display=t===tab?'block':'none';
        const btn=document.querySelector(`nav button[data-tab="${t}"]`);
        if(btn){
          btn.classList.toggle('active',t===tab);
          btn.setAttribute('aria-current', t===tab?'page':'false');
        }
      });
      currentTab=tab;
    }
    showTab('timer');

    // Timer display formatting
    function formatSeconds(sec){
      const m=Math.floor(sec/60);
      const s=sec%60;
      return (m<10?'0':'')+m+':'+(s<10?'0':'')+s;
    }
    function updateTimerDisplay(){
      const labelMap={focus:'Focus Session',shortBreak:'Short Break',longBreak:'Long Break'};
      timerLabel.textContent=labelMap[phase]||'Focus Session';
      timerDisplay.textContent=formatSeconds(timerSeconds);
      startPauseBtn.textContent=timerRunning?'Pause':'Start';
    }

    // Timer tick
    function timerTick(){
      if(timerRunning){
        timerSeconds--;
        if(timerSeconds<0){
          clearInterval(timerInterval);
          timerRunning=false;
          handleTimerEnd();
          return;
        }
        updateTimerDisplay();
      }
    }
    function handleTimerEnd(){
      if(phase==='focus'){
        completedCycles++;
        if(completedCycles%4===0){
          phase='longBreak';
          timerSeconds=parseInt(longBreakInput.value)*60;
          alert('Long break! Relax and recharge.');
        }else{
          phase='shortBreak';
          timerSeconds=parseInt(shortBreakInput.value)*60;
          alert('Short break! Breathe and relax.');
        }
      }else{
        phase='focus';
        timerSeconds=parseInt(focusInput.value)*60;
        alert('Back to focus!');
      }
      updateTimerDisplay();
    }
    startPauseBtn.onclick=()=>{
      if(timerRunning){
        clearInterval(timerInterval);
        timerRunning=false;
      }else{
        timerRunning=true;
        timerInterval=setInterval(timerTick,1000);
      }
      updateTimerDisplay();
    };
    resetBtn.onclick=()=>{
      clearInterval(timerInterval);
      timerRunning=false;
      timerSeconds=(phase==='focus'?parseInt(focusInput.value):
                    phase==='shortBreak'?parseInt(shortBreakInput.value):
                    parseInt(longBreakInput.value))*60;
      updateTimerDisplay();
    };

    [focusInput,shortBreakInput,longBreakInput].forEach(input=>{
      input.addEventListener('change',()=>{
        if(phase==='focus') timerSeconds=parseInt(focusInput.value)*60;
        else if(phase==='shortBreak') timerSeconds=parseInt(shortBreakInput.value)*60;
        else timerSeconds=parseInt(longBreakInput.value)*60;
        updateTimerDisplay();
      });
    });
    updateTimerDisplay();

    // Task manager logic
    let tasks=JSON.parse(localStorage.getItem('tasks')||'[]');
    function saveTasks(){localStorage.setItem('tasks',JSON.stringify(tasks));}
    function renderTasks(){
      tasksList.innerHTML='';
      tasks.forEach(task=>{
        const taskDiv=document.createElement('div');
        taskDiv.className='task-item';
        const checkbox=document.createElement('input');
        checkbox.type='checkbox';
        checkbox.checked=task.done;
        checkbox.className='task-checkbox';
        checkbox.setAttribute('aria-label','Mark task as done: '+task.text);
        checkbox.addEventListener('change',()=>{
          task.done=checkbox.checked;
          saveTasks();
          renderTasks();
        });
        const textSpan=document.createElement('span');
        textSpan.className='task-text'+(task.done?' done':'');
        textSpan.textContent=task.text;
        const prioritySpan=document.createElement('span');
        prioritySpan.className='task-priority priority-'+task.priority;
        prioritySpan.textContent=task.priority;
        const delBtn=document.createElement('span');
        delBtn.className='task-delete';
        delBtn.setAttribute('role','button');
        delBtn.setAttribute('tabindex','0');
        delBtn.setAttribute('aria-label','Delete task '+task.text);
        delBtn.textContent='âœ•';
        delBtn.onclick=()=>{
          if(confirm('Delete task "'+task.text+'" ?')){
            tasks=tasks.filter(t=>t!==task);
            saveTasks();
            renderTasks();
          }
        };
        delBtn.onkeypress=e=>{
          if(e.key==='Enter')delBtn.onclick();
        };
        taskDiv.appendChild(checkbox);
        taskDiv.appendChild(textSpan);
        taskDiv.appendChild(prioritySpan);
        taskDiv.appendChild(delBtn);
        tasksList.appendChild(taskDiv);
      });
    }
    addTaskBtn.onclick=()=>{
      const text=newTaskInput.value.trim();
      const priority=taskPrioritySelect.value;
      if(text){
        tasks.unshift({text,priority,done:false});
        saveTasks();
        renderTasks();
        newTaskInput.value='';
        taskPrioritySelect.value='Normal';
      }
    };
    renderTasks();

    // Journal logic
    moodSelect.value=localStorage.getItem('dailyMood')||'3';
    energySelect.value=localStorage.getItem('dailyEnergy')||'3';
    journalEntry.value=localStorage.getItem('journalEntry')||'';
    moodSelect.addEventListener('change',()=>localStorage.setItem('dailyMood',moodSelect.value));
    energySelect.addEventListener('change',()=>localStorage.setItem('dailyEnergy',energySelect.value));
    journalEntry.addEventListener('input',()=>localStorage.setItem('journalEntry',journalEntry.value));

    // Motivational quotes with soulful voice
    hearQuoteBtn.onclick=()=>{
      if('speechSynthesis' in window){
        window.speechSynthesis.cancel();
        const utter=new SpeechSynthesisUtterance(quotes[quoteIndex]);
        const voices=window.speechSynthesis.getVoices();
        // Choose a softer, more soulful voice if available
        let soulfulVoice=voices.find(v =>
          /(english|uk|female|sarah|kate)/i.test(v.name)
        );
        if(!soulfulVoice) soulfulVoice=voices[0];
        utter.voice=soulfulVoice;
        utter.rate=0.85;
        utter.pitch=1.3;
        window.speechSynthesis.speak(utter);
      }else alert('Speech synthesis not supported.');
    };
    function cycleQuote(){
      quoteIndex=(quoteIndex+1)%quotes.length;
      motivationDiv.textContent='"'+quotes[quoteIndex]+'"';
    }
    setInterval(cycleQuote,15000);

    // Analytics bars
    function renderAnalytics(){
      analyticsBars.innerHTML='';
      const maxM=Math.max(...weeklyFocusMinutes);
      weeklyFocusMinutes.forEach((min,idx)=>{
        const bar=document.createElement('div');
        bar.className='analytics-bar';
        const fill=document.createElement('div');
        fill.className='analytics-bar-fill';
        fill.style.height=(min/maxM*100)+'%';
        fill.title=min+' minutes focused';
        const label=document.createElement('div');
        label.className='analytics-bar-label';
        const days=['Sun','Mon','Tue','Wed','Thu','Fri','Sat'];
        const today=new Date();
        const di=(today.getDay()-6+idx+7)%7;
        label.textContent=days[di];
        bar.appendChild(fill);
        bar.appendChild(label);
        analyticsBars.appendChild(bar);
      });
      streakCountSpan.textContent=streakCount;
      productivityScoreSpan.textContent=productivityScore;
    }
    renderAnalytics();

    // Navigation buttons
    document.querySelectorAll('nav button').forEach(btn=>{
      btn.addEventListener('click',()=>{
        showTab(btn.getAttribute('data-tab'));
      });
    });

    // Theme toggle logic
    const themeToggle=document.getElementById('theme-toggle');
    themeToggle.addEventListener('click',() => {
      const currentTheme=app.getAttribute('data-theme');
      if(currentTheme==='light'){
        app.setAttribute('data-theme','dark');
        themeToggle.innerHTML='ðŸŒž <span>Light Mode</span>';
      } else {
        app.setAttribute('data-theme','light');
        themeToggle.innerHTML='ðŸŒ™ <span>Dark Mode</span>';
      }
    });
    themeToggle.addEventListener('keydown',e=>{
      if(e.key==='Enter'||e.key===' '){
        e.preventDefault();
        themeToggle.click();
      }
    });
  })();
</script>
</body>
</html>

